/*!
 * shenjian tools v1.5.0
 * (c) 2018 楼教主 <fe.52cik@gmail.com> (http://www.52cik.com/)
 * Released under the MIT License.
 */
(function(e){"use strict";var r=1e3,s=60*r,n=60*s,t=24*n,c=7*t,a=365.25*t;function i(e){return(e=+e)<10?"0"+e:e}function u(e,r){return!1===r?e:""===e.trim()?e:/\.(jpe?g|gif|a?png|bmp|webp)@/i.test(e)?e.replace(/(\.\w+)@.+/,"$&$1"):/\.(jpe?g|gif|a?png|bmp|webp)/i.test(e)?e:e.replace(/(\?.+)?$/,".jpg$&")}function o(e){return""===e.trim()?e:e.replace(/(?=^\/\/)/,"http:")}function f(e,r){return""===e.trim()?e:u(o(e),r)}var m=new RegExp("[\\x00-\\xff]+","g");var d={};var l={set:function(e,r){d[e]=r},get:function(e){return d[e]},del:function(e){delete d[e]},clear:function(){d={}}};return e.store=l,e.getTime=function(e){var r="";if(e.replace(/(20\d{1,2})\D(\d{1,2})\D(\d{1,2})(?:\D+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?/,function(e,s,n,t,c,a,u){r=s+"-"+i(n)+"-"+i(t),c&&(r+=" "+i(c)),a&&(r+=":"+i(a)),u&&(r+=":"+i(u))}),!/^20\d+-\d+-\d+/.test(r))return null;var s="0000-00-00 00:00:00".slice(r.length);return r+=s,new Date(r)},e.expired=function(e,i){return"string"==typeof e&&(e=new Date(e)),+e<Date.now()-function(e){if(!((e=String(e)).length>100)){var i=/^((?:\d+)?-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var u=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*a;case"weeks":case"week":case"w":return u*c;case"days":case"day":case"d":return u*t;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*s;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}(i)},e.getJSON=function(e,r){e=e.replace(/^[^{[]+/,"").replace(/[^}\]]+$/,"");try{return JSON.parse(e)}catch(e){return r||{}}},e.clearImg=function(e,r){return e.replace(/<img[^>]+?src="([^"]+)"[^>]*>(?:<\/img>)?/gi,function(e,s){return'<img src="'+f(s,r)+'">'})},e.fixImgExt=u,e.fixHttp=o,e.fixImg=f,e.strLen=function(e){return e?String(e).replace(m,"").length:0},e})({});
